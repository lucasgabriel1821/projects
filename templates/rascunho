<!DOCTYPE html>
<html>
  <head>
    <title>Controle de Estoque</title>
    <link rel="stylesheet" type="text/css" href="/static/styles.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>

  <body>
    <h1>Controle de Estoque da Técnica</h1>
    <br />
    <div class="buttons">
      <button><a href="/adicionar">Adicionar Item</a></button>
      <button type="submit">Enviar relação por E-mail</button>
    </div>
    <br /><br />
    <table>
      <tr>
        <th>Nome</th>
        <th>Quantidade</th>
        <th>Ações</th>
      </tr>
      {% for item in estoque %}
      <tr>
        <td>{{ item[0] }}</td>
        <td>{{ item[1] }}</td>
        <td>
          <button><a href="/editar/{{ item[0] }}">Editar</a></button> |
          <button>
            <a
              href="{{ url_for('excluir_item', nome=item[0]) }}"
              class="excluir-button"
              data-nome-item="{{ item[0] }}"
              >Excluir</a
            >
          </button>
        </td>
      </tr>
      {% endfor %}
    </table>
    <br />

    <footer><br /></footer>
    <script>
      $(document).ready(function () {
        $(".excluir-button").on("click", function (e) {
          e.preventDefault();
          var nomeItem = $(this).data("nome-item");
          if (
            confirm("Você deseja realmente excluir o item '" + nomeItem + "'?")
          ) {
            window.location.href = $(this).attr("href");
          }
        });
      });
    </script>
  </body>
</html>
